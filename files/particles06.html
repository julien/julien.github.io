<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <style type="text/css">
      * { margin: 0; padding: 0; }
      body { background-color: #000; height: 100%; text-align: center; }
    </style>
  </head>

  <body>
    <canvas id="canvas"></canvas>
    <script src="assets/processing-1.3.6.js"></script>
    <script>

      function sketch(p) {

        // var img = p.loadImage("assets/heart.png");
        // p.imageMode(p.CENTER);

        var maxBalls = 100;
        var balls = [];
        var WIDTH =  640;
        var HEIGHT = 480;


        var dx = 10;
        var dy = 10;
        var dz = 10;
        var xt = 1;
        var	yt = 1;
        var	zt = 1;
        var	a = 10;
        var	b = 28;
        var	c = 8/3;
        var	dt = 0.01;

        function Ball(x, y, rad) {
          this.x = x;
          this.y = y;
          this.rad = rad;
          this.r = 155;
          this.g = 225;
          this.b = 0;
          this.a = 255;

          this.update = function() {
            this.a -= .25;
            this.rad -= .20;
            this.r -= 5;
            this.b += 5;
          }

        }

        p.setup = function() {
          this.size(WIDTH, HEIGHT);
          this.background(0);
        }
        p.draw = function() {
          // update lorenz
          dx = a * (yt - xt) * dt;
          dy = (xt * (b - zt) - yt) * dt;
          dz = (xt * yt -c * zt) * dt;
          xt += dx;
          yt += dy;
          zt += dz;

          // clear the canvas
          p.fill(0, 5);
          p.rect(0, 0, p.width, p.height);

          // add new ball - delete old one
          balls.push(new Ball(WIDTH / 60 * ( xt + 30), HEIGHT / 60 * (-zt + 60), zt * 1.5));
          if (balls.length > maxBalls) balls.shift();

          // draw on the canvas
          p.noStroke();
          var len = balls.length;
          for (i = 0; i < len; i++) {
            balls[i].update();
            p.fill(balls[i].r, balls[i].g, balls[i].b, balls[i].a);
            p.ellipse(balls[i].x, balls[i].y, balls[i].rad * 2, balls[i].rad * 2);

            // p.image(img, balls[i].x, balls[i].y, balls[i].rad * 2, balls[i].rad * 2);
          }
        }
      }

      var c = document.getElementById("canvas");
      c.style.width =  window.innerWidth + "px";
      c.style.height = window.innerHeight + "px";
      var p = new Processing(c, sketch);
    </script>
    <script src="assets/menu.js"></script>
  </body>
</html>
